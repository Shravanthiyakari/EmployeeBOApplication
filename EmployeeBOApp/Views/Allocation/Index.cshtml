@model EmployeeBOApp.Models.TicketingTable
@{
    ViewData["Title"] = "Assignment Request";
}

<h2>Assignment Request Form</h2>
<div id="successMessage" class="alert alert-success text-center" style="display:none;"></div>
<div id="errorMessage" class="alert alert-danger text-center" style="display:none;"></div>

<form id="allocationForm">
    <div class="form-group">
        <label>Short Project Name <span style="color:red;">*</span></label>
        <select id="ShortProjectName" name="ShortProjectName" class="form-control" required>
            <option value="">-- Select Project --</option>
            @foreach (var name in ViewBag.ShortProjectNames)
            {
                <option value="@name">@name</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label>Emp ID <span style="color:red;">*</span></label>
        <input type="text" id="EmpID" name="EmpId" class="form-control"
               maxlength="8"
               pattern="^P0\d{6}$"
               title="Emp ID should start with 'P0' followed by 6 digits (e.g., PO123456)"
               required />
    </div>

    <div class="form-group">
        <label>Employee Name <span style="color:red;">*</span></label>
        <input type="text" id="Name" name="EmpName" class="form-control" required />
    </div>

    <div class="form-group">
        <label>Project Code <span style="color:red;">*</span></label>
        <input type="text" id="ProjectCode" name="ProjectId" class="form-control" readonly required />
    </div>

    <div class="form-group">
        <label>Project Name <span style="color:red;">*</span></label>
        <input type="text" id="ProjectName" class="form-control" readonly />
    </div>

    <div class="form-group">
        <label>Project Manager <span style="color:red;">*</span></label>
        <input type="text" id="ProjectManager" class="form-control" readonly />
    </div>

    <div class="form-group">
        <label>Delivery Manager <span style="color:red;">*</span></label>
        <input type="text" id="DeliveryManager" class="form-control" readonly />
    </div>

    <div class="form-group">
        <label>Requested By (PM Email) <span style="color:red;">*</span></label>
        <input type="email" id="RequestedBy" name="RequestedBy" class="form-control" required />
    </div>

    <div class="form-group">
        <label>Start Date <span style="color:red;">*</span></label>
        <input type="date" id="StartDate" name="StartDate" class="form-control" min="@DateTime.Now.ToString("yyyy-MM-dd")" required />

    </div>

    <div class="form-group">
        <label>End Date <span style="color:red;">*</span></label>
        <input type="date" id="EndDate" name="EndDate" class="form-control" min="@DateTime.Now.ToString("yyyy-MM-dd")" required />

    </div>

    <div class="form-group row mt-3">
        <div class="col-sm-12 text-end">
            <button type="submit" class="btn btn-success me-2">Submit Request</button>
            <button type="button" id="clearButton1" class="btn btn-secondary">Clear</button>
        </div>
    </div>
</form>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

    <script src="@Url.Content("~/js/Allocation.js")"></script>
}